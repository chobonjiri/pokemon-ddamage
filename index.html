<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ポケモン実数値計算ツール</title>
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@10.2.7/dist/css/autoComplete.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <link rel="stylesheet" href="style/base.css" />
  <link rel="stylesheet" href="style/layout.css" />
  <link rel="stylesheet" href="style/components/buttons.css" />
  <link rel="stylesheet" href="style/components/forms.css" />
  <link rel="stylesheet" href="style/components/segmented-control.css" />
  <link rel="stylesheet" href="style/modules/panels.css" />
  <link rel="stylesheet" href="style/modules/damage-popup.css" />
  <link rel="stylesheet" href="style/menu.css" />
  </head>
<body>

<div class="container">
  <div class="panel">
    <div class="attacker-input-group">
      <input type="text" id="attacker" autocomplete="off" placeholder="入力：攻撃側ポケモン" class="search-input-field" />
      <button id="attacker-button-1" type="button">テラス</button>
      <button id="attacker-button-2" type="button">ステラ</button>
    </div>

    <input type="text" id="move" autocomplete="off" placeholder="入力：技" class="search-input-field" />
    <div id="move-double-damage-section" style="margin-top:5px; display:none;">
      <label><input type="checkbox" id="double-damage-checkbox" /> ダブルダメージとして扱う</label>
    </div>

    <div class="ability-section">
      <div class="segmented-control" id="ability-choice">
        <button type="button" class="ability-btn">特性1</button>
        <button type="button" class="ability-btn">特性2</button>
        <button type="button" class="ability-btn">特性3</button>
        <input type="text" id="custom-ability" placeholder="特性入力">
        <div class="ability-nullified-checkbox-wrapper">
          <label><input type="checkbox" id="ability-nullified"> 無効化</label>
        </div>
      </div>
    </div>


    <div class="stat-block">
      <h4>A</h4>
      個体値: <input type="number" id="attack-iv" value="31" min="0" max="31" /><br />
      努力値: <input type="range" id="attack-ev" value="0" min="0" max="252" step="4" />
      <span id="attack-ev-val">0</span><br />
      <div class="inline-flex-group"> 性格:
        <div class="segmented-control" id="attack-nature-control">
          <button type="button" data-value="0.9">x0.9</button>
          <button type="button" data-value="1.0" class="active">x1.0</button>
          <button type="button" data-value="1.1">x1.1</button>
        </div>
      </div>
      <input type="hidden" id="attack-nature" value="1.0">
      <br />
      ランク:
      <button onclick="changeRank('attack', -1)" class="rank-btn">-</button>
      <span id="attack-rank-val">0</span>
      <button onclick="changeRank('attack', 1)" class="rank-btn">+</button><br />
      実数値: <span id="attack-actual">-</span>
    </div>
  </div>

  <div class="panel">
    <div class="defender-control-group">
      <input type="text" id="defender" autocomplete="off" placeholder="入力：防御側ポケモン" class="search-input-field" />
      <div class="switch-with-text">
        <span class="switch-text">テラス</span>
        <label class="switch">
          <input type="checkbox" id="toggleSwitch"> <span class="slider"></span>
        </label>
      </div>
      
      <div class="segmented-control" id="speedControl">
        <button type="button">x0.5</button>
        <button type="button">x1.0</button>
        <button type="button">x2.0</button>
      </div>
    </div>

    <div id="defender-abilities" class="ability-section">
      <div class="segmented-control">
        <button type="button" class="ability-btn">特性1</button>
        <button type="button" class="ability-btn">特性2</button>
        <button type="button" class="ability-btn">特性3</button>
        <input type="text" id="defender-custom-ability" placeholder="特性入力">
        <div class="ability-nullified-checkbox-wrapper">
          <label><input type="checkbox" id="defender-ability-nullified"> 無効化</label>
        </div>
      </div>
    </div>

    <div class="stat-block">
      <h4>HP</h4>
      個体値: <input type="number" id="hp-iv" value="31" min="0" max="31" /><br />
      努力値: <input type="range" id="hp-ev" value="0" min="0" max="252" step="4" />
      <span id="hp-ev-val">0</span><br />
      実数値: <span id="hp-actual">-</span>
    </div>

    <div class="stat-block">
      <h4>B or D</h4>
      個体値: <input type="number" id="defense-iv" value="31" min="0" max="31" /><br />
      努力値: <input type="range" id="defense-ev" value="0" min="0" max="252" step="4" />
      <span id="defense-ev-val">0</span><br />
      <div class="inline-flex-group"> 性格:
        <div class="segmented-control" id="defense-nature-control">
          <button type="button" data-value="0.9">x0.9</button>
          <button type="button" data-value="1.0" class="active">x1.0</button>
          <button type="button" data-value="1.1">x1.1</button>
        </div>
      </div>
      <input type="hidden" id="defense-nature" value="1.0"> <br />
      ランク:
      <button onclick="changeRank('defense', -1)" class="rank-btn">-</button>
      <span id="defense-rank-val">0</span>
      <button onclick="changeRank('defense', 1)" class="rank-btn">+</button><br />
      実数値: <span id="defense-actual">-</span>
    </div>
  </div>
</div>

<label class="toggle" for="open">
  <i class="fa fa-bars" aria-hidden="true"></i>
</label>
<input id="open" type="checkbox">

<div id="menu">
  <h2>条件</h2>

  <div class="menu-section">
    <label>壁</label>
    <label class="checkbox"><input type="checkbox" id="aurora-veil"> オーロラベール</label>
    <label class="checkbox"><input type="checkbox" id="reflect"> リフレクター</label>
    <label class="checkbox"><input type="checkbox" id="light-screen"> ひかりのかべ</label>
    <label class="checkbox"><input type="checkbox" id="friend-guard"> フレンドガード</label>
  </div>
  
  <div class="menu-section">
    <label>天候</label>
    <div class="segmented-control" id="weatherControl">
      <button type="button" data-value="sun">晴</button>
      <button type="button" data-value="rain">雨</button>
      <button type="button" data-value="sand">砂</button>
      <button type="button" data-value="hail">雪</button>
    </div>

    <label>フィールド</label>
    <div class="segmented-control" id="fieldControl">
      <button type="button" data-value="grassy">グラス</button>
      <button type="button" data-value="electric">エレキ</button>
      <button type="button" data-value="psychic">サイコ</button>
      <button type="button" data-value="misty">ミスト</button>
    </div>

    <label>わざわい</label>
    <div class="segmented-control" id="ruinControl">
      <button type="button" data-value="tablets">A↓</button>
      <button type="button" data-value="sword">B↓</button>
      <button type="button" data-value="vessel">C↓</button>
      <button type="button" data-value="beads">D↓</button>
    </div>
  </div>

  <div class="menu-section">
    <label>状態</label>
    <label class="checkbox"><input type="checkbox" id="helping-hand"> てだすけ</label>
    <label class="checkbox"><input type="checkbox" id="checkbox-burn"> やけど</label> </div>
</div>

<div id="overlay"></div>

<div id="damage-popup">
  <h3>ダメージ計算結果</h3>
  <div class="damage-bar-container">
    <div class="damage-bar-background">
      <div id="normal-min" class="damage-segment normal"></div>
      <div id="normal-max" class="damage-segment normal"></div>
      <div id="critical" class="damage-segment critical"></div>
    </div>
    <div class="damage-labels">
      <span id="label-normal">通常: --%</span>
      <span id="label-critical">急所: --%</span>
    </div>
    <div class="damage-values">
      <span id="value-normal">通常: ${damageNormalMin} - ${damageNormalMax} ダメージ</span>
      <span id="value-critical">急所: ${damageCritical} ダメージ</span>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@10.2.7/dist/autoComplete.min.js"></script>

<script src="ui/ui-interactions.js" defer></script>
<script src="ui/damage-calculator-ui.js" defer></script>

<script src="ui/app.js" defer></script>
</body>
</html>